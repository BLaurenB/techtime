<h1>Current Cart</h1>

<% @cart.collect_freelancers.each do |freelancer| %>
<ul class="list-group">
  <%= image_tag(@freelancer.avatar.url(:square), class: "image-fl-index", id: "image_#{freelancer.id}") %>
  <h3>Name: <%= freelancer.name %></h3>
  <li class="list-group-item"><%= freelancer.description %></li>
  <li class="list-group-item">Quantity: <%= @cart.count_of(freelancer.id)%></li>
  <%= button_to "Add an hour", cart_index_path(freelancer_id: freelancer.id), class: "btn btn-danger"%>
  <%= button_to "Remove an hour", cart_path(freelancer_id: freelancer.id), class: "btn btn-danger", method: :patch%>
  <li class="list-group-item">$<%= freelancer.price %>/hr</li>
  <li class="list-group-item"> Subtotal: $<%= @cart.subtotal(freelancer) %></li>
  <%= link_to "Remove #{freelancer.name}'s time from your cart.", cart_index_path(freelancer_id: freelancer.id), method: :delete %>
<% end %>
</ul>
  <h2>Total: $<%= @cart.total_price %></h2>
</div>
<% if current_user.nil? %>
  <div class="login-to-checkout">
    <%= link_to "Login or Create Account to Checkout", login_path %>
  </div>
<% else %>
  <div class="checkout">
    <%= button_to "Checkout", orders_path(cart_contents: @cart.contents) %>
  </div>
<% end %>
